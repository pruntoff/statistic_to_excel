# Формирование статистики
Этот скрипт позволяет сформировать статистику из выгрузки Splunk'а из отчета export_1_3.

## Установка:

### 0. Для использования скрипта у Вас на компьютере должен быть установлен Python v3.x и необходимые зависимости из Anaconda.
Установите себе Anaconda (инструкция - https://docs.anaconda.com/anaconda/install/)

### 1. Сохраните на локальный компьютер файлы из репозитория.
Сохраняйте в любое удобное место. Все просто: нажмите "скачать" и при необходимости разархивируйте.

## Использование:

### 0. Скачайте из отчета Polymatica csv файл и подготовьте его
При скачивании придерживайтесь наименований файлов, а именно, название скаченного файла из полиматики должно быть следующего формата: "plmtk010131012021.csv", где:

- "plmtk" - общий префикс для всех файлов из полиматики;
- "010131012021" - период в формате "ddmmddmmyyyy" 

Поищите в каталоге ноутбук который называется prepare.ipynb и выполните первые несколько ячеек, которые сформируют подготовленный файл вида "01.01-31.01.csv"
Этот файл необходимо разместить в папку 'data/csv/' в корневом каталоге скрипта (который вы скачали из репозитория).
Вуаля, вы прекрасны

P.S.: Если вы умеете и у вас дойдут руки, вы можете перенести код очистки из prepare.ipynb в функцию clear_df() в monitor_functions.py, чтобы не делать лишних шагов.
### 1. Запустите скрипт.
Откройте командную строку или Anaconda Prompt (в случае если у вас стоит Anaconda) и при необходимости перейдите в каталог со скриптом (cd 'path', где 'path' - путь до каталога со скриптом).  
В случае если вы хотите получить статистику по всей России - введите команду:
  
`python banks_statistics.py -i 'csv_file_name' -f 'output_folder_name'`  
  
Где `'csv_file_name'` имя скаченного csv файла, а `'output_folder_name'` имя каталога в папке reports без пробелов, в который сохранится ваш отчет. Например,  
  
`python banks_statistics.py -i 01.01 -f снова_чёртова_статистика_по_банкам`

Если вам нужен отдельный отчет по банку, просто добавьте аргумент `-b 'info_system'` и в отчеты попадет папка с банком, не забудьте переименовать `'output_folder_name'`, например,

`python banks_statistics.py -i 01.01 -f самый_лучший_банк_в_мире -b 111111_2CH`

Готово. В папке reports теперь есть папочка с вашими отчетами.

И последнее, у вас могут вылезать ошибки, самая частая из них - скрипт не может найти мнемонику банка. В таком случае, просто добавьте эту мнемонику в 'dicts/bank_names.xlsx' и ошибка исчезнет.

  
